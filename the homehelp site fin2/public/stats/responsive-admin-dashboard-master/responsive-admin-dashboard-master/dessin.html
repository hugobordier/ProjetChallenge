<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Dessin</title>

    <!-- Montserrat Font -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
  </head>
  <body>
    <div class="grid-container">

      <!-- Header 
      <header class="header">
        <div class="menu-icon" onclick="openSidebar()">
          <span class="material-icons-outlined">menu</span>
        </div>
      </header>
      End Header -->

      <!-- Sidebar -->
      <aside id="sidebar">
        <div class="sidebar-title">
          <div class="sidebar-brand">
            <span class="material-icons-outlined">inventory</span> STATISTIQUES
          </div>
          <span class="material-icons-outlined" onclick="closeSidebar()">close</span>
        </div>

        <ul class="sidebar-list">
          <li class="sidebar-list-item" onclick="redirectWithId('dessin')">
              <span class="material-icons-outlined">edit</span> Dessin
          </li>
          <li class="sidebar-list-item" onclick="redirectWithId('temperature')">
              <span class="material-icons-outlined">thermostat</span> Température
          </li>
          <li class="sidebar-list-item" onclick="redirectWithId('serrage')">
              <span class="material-icons-outlined">handshake</span> Serrage
          </li>
          <li class="sidebar-list-item" onclick="redirectWithId('posture')">
              <span class="material-icons-outlined">accessibility</span> Posture 
          </li>
          <li class="sidebar-list-item" onclick="redirectWithId('audio')">
              <span class="material-icons-outlined">headphones</span> Audio
          </li>
          <li class="sidebar-list-item" onclick="redirectWithId('tangram')">
              <span class="material-icons-outlined">casino</span> Tangram
          </li>
          <li class="sidebar-list-item" onclick="redirectWithId('flux')">
            <span class="material-icons-outlined">air</span> Flux
        </li>
          <li class="sidebar-list-item" onclick="redirectAtAccueil()">
              <span class="material-icons-outlined">undo</span> Retour a l'accueil
          </li>
        </ul>
      </aside>
      <!-- End Sidebar -->

      <!-- Main -->
      <main class="main-container">
        <div class="main-title">
          <p class="font-weight-bold">DESSIN</p>
          <div class="midle" onclick="openSidebar()">
          <span class="material-icons-outlined">menu</span>            
          </div>
        </div>

        <div class="main-cards">

          <div class="card">
            <div class="card-inner">
              <p class="text-primary">Moyenne réussite dessin niv.1</p>
            </div>
            <span id="average-score1" class="text-primary font-weight-bold">Loading</span>
          </div>
        
          <div class="card">
            <div class="card-inner">
              <p class="text-primary">Moyenne réussite dessin niv.2</p>
            </div>
            <span id="average-score2" class="text-primary font-weight-bold">Loading</span>
          </div>
        
          <div class="card">
            <div class="card-inner">
              <p class="text-primary">Moyenne réussite dessin niv.3</p>
            </div>
            <span id="average-score3" class="text-primary font-weight-bold">Loading</span>
          </div>
        
          <div class="card">
            <div class="card-inner">
              <p class="text-primary">Score au dernier test</p>
            </div>
            <span id="average-score-all" class="text-primary font-weight-bold">Loading</span>
          </div>

        </div>

        <div class="charts">

          <div class="charts-card">
            <p class="chart-title">Top 5 des meilleurs scores</p>
            <div id="bar-chart"></div>
          </div>

          <div class="charts-card">
            <p class="chart-title">Resume des derniers tests </p>
            <div id="area-chart"></div>
          </div>

        </div>
      </main>
      <!-- End Main -->

    </div>

    <!-- Scripts -->
    <!-- ApexCharts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.35.3/apexcharts.min.js"></script>
    <!-- Custom JS -->
    <script src="js/scripts.js"></script>
  </body>
  <script>
      function redirectWithId(str) {
        const urlParams = new URLSearchParams(window.location.search);
        const nom = urlParams.get('nom');
        const prenom = urlParams.get('prenom');
        const userId = urlParams.get('id');

        const redirectUrl = `${str}.html?id=${userId}`;

        window.location.href = redirectUrl;
    }
  </script>
</html>