<!DOCTYPE html>
<html style="font-size: 20px;" lang="fr">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="description" content="">
    <title>register</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="nicepage.css" media="screen">
    <link rel="stylesheet" href="register.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 6.10.5, nicepage.com">
    <meta name="referrer" content="origin">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
</head>
<body>
    <section class="sectionname">
        <div class="titre"> The HomeHelp Start-Up </div>
    </section>
    <section class="u-clearfix u-grey-5 u-section-1" id="carousel_c84f">
        <div class="u-clearfix u-sheet u-sheet-1">
            <div class="u-expanded-width u-list u-list-1">
                <div class="identification-container">
                    <div class="creationcompte">Cr√©er un compte</div>
                    <form id="registerForm">
                        <input type="text" id="user_name" name="user_name" placeholder="Nom" required>
                        <input type="text" id="user_prenom" name="user_prenom" placeholder="Prenom" required>
                        <div class="password-container">
                            <input type="password" id="user_password" name="user_password" placeholder="Mot de passe" required>
                            <span class="toggle-password" id="togglePassword">üëÅÔ∏è</span>
                        </div>
                        <input type="email" id="user_email" name="user_email" placeholder="Email" required>
                        <button type="submit">Valider</button>
                        
                    </form><button class="retour" onclick="redirectWithId('√Ä-propos-de')">Retour</button>
                    <script src="register.js"></script>
</body>
<script>

const passwordInput = document.getElementById('user_password');
const togglePassword = document.getElementById('togglePassword');

function togglePasswordVisibility() {
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
    } else {
        passwordInput.type = 'password';
    }
}


function handleMouseEvents() {
    togglePassword.addEventListener('mousedown', () => {
        if (window.innerWidth >= 500) {
            passwordInput.type = 'text';
        }
    });

    togglePassword.addEventListener('mouseup', () => {
        if (window.innerWidth >= 500) {
            passwordInput.type = 'password';
        }
    });

    togglePassword.addEventListener('mouseleave', () => {
        if (window.innerWidth >= 500) {
            passwordInput.type = 'password';
        }
    });

    togglePassword.addEventListener('click', () => {
        if (window.innerWidth < 500) {
            togglePasswordVisibility();
        }
    });
}

handleMouseEvents();

document.getElementById('registerForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const user_name = document.getElementById('user_name').value;
    const user_password = document.getElementById('user_password').value;
    const user_email = document.getElementById('user_email').value;
    const user_prenom = document.getElementById('user_prenom').value;

    const response = await fetch('http://172.20.10.9:3000/user', {  
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ user_name, user_password, user_email, user_prenom })
    });
            window.location.href = `√Ä-propos-de.html`;
});

window.addEventListener('resize', handleMouseEvents);

    function redirectWithId(str) {
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('id');

        const redirectUrl = `${str}.html?id=${userId}`;

        window.location.href = redirectUrl;
    }


  </script>
</html>